{"version":3,"file":"util.js","sourceRoot":"","sources":["../src/util.ts"],"names":[],"mappings":"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","sourcesContent":["import { PopoverPosition, PopoverAlign, Rect } from './index';\n\nexport const EMPTY_RECT: Rect = {\n  top: 0,\n  left: 0,\n  right: 0,\n  bottom: 0,\n  width: 0,\n  height: 0,\n};\n\nexport type CreateRectProps = {\n  top: number;\n  left: number;\n  width: number;\n  height: number;\n};\n\nexport const createRect = ({ top, left, width, height }: CreateRectProps) => ({\n  top,\n  left,\n  width,\n  height,\n  right: left + width,\n  bottom: top + height,\n});\n\nexport const rectsAreEqual = (rectA: Rect, rectB: Rect) =>\n  rectA === rectB ||\n  (rectA?.bottom === rectB?.bottom &&\n    rectA?.height === rectB?.height &&\n    rectA?.left === rectB?.left &&\n    rectA?.right === rectB?.right &&\n    rectA?.top === rectB?.top &&\n    rectA?.width === rectB?.width);\n\nexport type CreateContainerProps = {\n  containerStyle?: Partial<CSSStyleDeclaration>;\n  containerClassName?: string;\n  id?: string;\n};\n\nexport const createContainer = ({\n  containerStyle,\n  containerClassName,\n  id,\n}: CreateContainerProps) => {\n  const container = window.document.createElement('div');\n  container.id = id;\n  if (containerClassName) container.className = containerClassName;\n  Object.assign(container.style, containerStyle);\n  return container;\n};\n\nexport const popoverRectForPosition = (\n  position: PopoverPosition,\n  childRect: Rect,\n  popoverRect: Rect,\n  padding: number,\n  align: PopoverAlign,\n): Rect => {\n  const targetMidX = childRect.left + childRect.width / 2;\n  const targetMidY = childRect.top + childRect.height / 2;\n  const { width, height } = popoverRect;\n  let top: number;\n  let left: number;\n\n  switch (position) {\n    case 'left':\n      top = targetMidY - height / 2;\n      left = childRect.left - padding - width;\n      if (align === 'start') {\n        top = childRect.top;\n      }\n      if (align === 'end') {\n        top = childRect.bottom - height;\n      }\n      break;\n    case 'bottom':\n      top = childRect.bottom + padding;\n      left = targetMidX - width / 2;\n      if (align === 'start') {\n        left = childRect.left;\n      }\n      if (align === 'end') {\n        left = childRect.right - width;\n      }\n      break;\n    case 'right':\n      top = targetMidY - height / 2;\n      left = childRect.right + padding;\n      if (align === 'start') {\n        top = childRect.top;\n      }\n      if (align === 'end') {\n        top = childRect.bottom - height;\n      }\n      break;\n    default:\n      top = childRect.top - height - padding;\n      left = targetMidX - width / 2;\n      if (align === 'start') {\n        left = childRect.left;\n      }\n      if (align === 'end') {\n        left = childRect.right - width;\n      }\n      break;\n  }\n\n  return createRect({ left, top, width, height });\n};\n\ninterface GetNewPopoverRectProps {\n  position: PopoverPosition;\n  reposition: boolean;\n  align: PopoverAlign;\n  childRect: Rect;\n  popoverRect: Rect;\n  boundaryRect: Rect;\n  padding: number;\n}\n\nexport const getNewPopoverRect = (\n  {\n    position,\n    align,\n    childRect,\n    popoverRect,\n    boundaryRect,\n    padding,\n    reposition,\n  }: GetNewPopoverRectProps,\n  boundaryInset: number,\n) => {\n  const rect = popoverRectForPosition(position, childRect, popoverRect, padding, align);\n\n  const boundaryViolation =\n    reposition &&\n    ((position === 'top' && rect.top < boundaryRect.top + boundaryInset) ||\n      (position === 'left' && rect.left < boundaryRect.left + boundaryInset) ||\n      (position === 'right' && rect.right > boundaryRect.right - boundaryInset) ||\n      (position === 'bottom' && rect.bottom > boundaryRect.bottom - boundaryInset));\n\n  return {\n    rect,\n    boundaryViolation,\n  } as const;\n};\n\nexport const getNudgedPopoverRect = (\n  popoverRect: Rect,\n  boundaryRect: Rect,\n  boundaryInset: number,\n): Rect => {\n  const topBoundary = boundaryRect.top + boundaryInset;\n  const leftBoundary = boundaryRect.left + boundaryInset;\n  const rightBoundary = boundaryRect.right - boundaryInset;\n  const bottomBoundary = boundaryRect.bottom - boundaryInset;\n\n  let top = popoverRect.top < topBoundary ? topBoundary : popoverRect.top;\n  top = top + popoverRect.height > bottomBoundary ? bottomBoundary - popoverRect.height : top;\n  let left = popoverRect.left < leftBoundary ? leftBoundary : popoverRect.left;\n  left = left + popoverRect.width > rightBoundary ? rightBoundary - popoverRect.width : left;\n\n  return createRect({ ...popoverRect, top, left });\n};\n"]}